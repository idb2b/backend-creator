<script setup>
import {
    PencilIcon,
    TrashIcon,
    ArrowLeftIcon,
    ArrowDownIcon,
    ArrowUpIcon,
} from "@heroicons/vue/24/outline";
import { useStore } from "vuex";
import DynamicModal from "@/Components/Modals/DynamicModal.vue";
import PageBuilder from "@/composables/PageBuilder";

import { ref, computed } from "vue";

const showModalDeleteComponent = ref(false);

// use dynamic model
const typeModal = ref("");
const gridColumnModal = ref(Number(1));
const titleModal = ref("");
const descriptionModal = ref("");
const firstButtonModal = ref("");
const secondButtonModal = ref(null);
const thirdButtonModal = ref(null);
// set dynamic modal handle functions
const firstModalButtonFunction = ref(null);
const secondModalButtonFunction = ref(null);
const thirdModalButtonFunction = ref(null);

const store = useStore();
const pageBuilder = new PageBuilder(store);

// remove component
const deleteComponent = function (e) {
    // set modal standards
    showModalDeleteComponent.value = true;
    typeModal.value = "delete";
    gridColumnModal.value = 2;
    titleModal.value = "Remove section?";
    descriptionModal.value = "Are you sure you want to remove this section?";
    firstButtonModal.value = "Close";
    secondButtonModal.value = null;
    thirdButtonModal.value = "Delete";

    // handle click
    firstModalButtonFunction.value = function () {
        // set open modal
        showModalDeleteComponent.value = false;
    };
    //
    // handle click
    thirdModalButtonFunction.value = function () {
        pageBuilder.deleteComponent();
        // set open modal
        showModalDeleteComponent.value = false;
    };
    // end modal
};
</script>

<template>
    <DynamicModal
        :show="showModalDeleteComponent"
        :type="typeModal"
        :gridColumnAmount="gridColumnModal"
        :title="titleModal"
        :description="descriptionModal"
        :firstButtonText="firstButtonModal"
        :secondButtonText="secondButtonModal"
        :thirdButtonText="thirdButtonModal"
        @firstModalButtonFunction="firstModalButtonFunction"
        @secondModalButtonFunction="secondModalButtonFunction"
        @thirdModalButtonFunction="thirdModalButtonFunction"
    >
        <header></header>
        <main></main>
    </DynamicModal>

    <div class="flex items-center justify-center gap-2">
        <div class="flex gap-2 items-center justify-center">
            <div
                @click="deleteComponent()"
                class="h-10 w-10 cursor-pointer rounded-full flex items-center border-none justify-center bg-gray-50 aspect-square hover:bg-myPrimaryErrorColor hover:text-white text-myPrimaryErrorColor"
            >
                <span class="myMediumIcon material-symbols-outlined">
                    delete
                </span>
            </div>
        </div>

        <div class="flex gap-2 items-center justify-center">
            <button
                type="button"
                @click="pageBuilder.moveComponent(-1)"
                class="h-10 w-10 cursor-pointer rounded-full flex items-center border-none justify-center bg-gray-50 aspect-square hover:bg-myPrimaryLinkColor hover:text-white focus-visible:ring-0"
            >
                <span class="material-symbols-outlined"> move_up </span>
            </button>
            <button
                type="button"
                @click="pageBuilder.moveComponent(1)"
                class="h-10 w-10 cursor-pointer rounded-full flex items-center border-none justify-center bg-gray-50 aspect-square hover:bg-myPrimaryLinkColor hover:text-white focus-visible:ring-0"
            >
                <span class="material-symbols-outlined"> move_down </span>
            </button>
        </div>
    </div>
</template>
